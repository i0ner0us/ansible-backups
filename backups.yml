---
 - hosts: ios_devices
   gather_facts: no
   connection: local

   vars_prompt:
   - name: "mgmt_username"
     prompt: "Username"
     private: no
   - name: "mgmt_password"
     prompt: "Password"
   - name: "address"
     prompt: "Address"
     private: no

   tasks:

   - name: SYS | Define provider
     set_fact:
       provider:
         host: "{{ inventory_hostname }}"
         username: "{{ mgmt_username }}"
         password: "{{ mgmt_password }}"

   - name: IOS | config changes
     ios_command:
       provider: "{{ provider }}"
       commands:
         - show run | redirect ftp://{{ address }}/{{ inventory_hostname }}-config

